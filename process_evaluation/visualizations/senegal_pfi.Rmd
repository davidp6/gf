---
title: "Senegal Performance Framework Indicators"
author: "Francisco Rios Casas"
date: "10/15/2019"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = FALSE, warning = FALSE)

library(data.table)
library(ggplot2)


country= "sen"

# load data
DT <- readRDS("C:/Users/frc2/Documents/Data/cleaned_pfi.RDS")
# subset as appropriate
DT = DT[loc_name==country]

```

#### 1. Introduction


#### 2. Data Completeness
```{r}
# What percentage of targets to they report on? 
# Which targets do they report on? 
```


#### 3. Data Sources
```{r}
# What sources are used to report by disease, and how does this change depending on target, result and verification?
# 
```


#### 4. Grants

##### TB
```{r}
DT1 <- DT[grant=="SEN-Z-MOH"]
DT1 <- DT1[pudr_sheet %in% c('impact_outcome_indicators_main', 'coverage_indicators_main')]
DT1 <- DT1[file_name =="SEN-Z-MOH_Progress  Report_30Jun2019   02 09 2019.xlsx"]

# plot of TB Data in Senegal-Most recent grant period
ggplot(DT1, aes(x=indicator_code, y=any_achievement_ratio)) +
  geom_point() +
  labs(title="TB performance in Senegal") +
  geom_hline(yintercept = 1) +
  theme_bw()+
  coord_flip()+
  labs(y="Achievement Ratio", x="Indicator", caption=paste0("Source: ", unique(DT1$file_name)))+
  ylim(0,1.5)
  
  
```


##### Malaria

```{r}
DT2 <- DT[grant=="SEN-M-PNLP"]
DT2 <- DT2[pudr_sheet %in% c('impact_outcome_indicators_main', 'coverage_indicators_main')]
DT2 <- DT2[file_name =="SEN-M-PNLP_Progress Report_S1 2019 Version finale du 15 Aout 2019.xlsx"]

# plot of TB Data in Senegal-Most recent grant period
ggplot(DT2, aes(x=indicator_code, y=any_achievement_ratio)) +
  geom_point() +
  labs(title="Malaria performance in Senegal") +
  geom_hline(yintercept = 1) +
  theme_bw()+
  coord_flip()+
  labs(y="Achievement Ratio", x="Indicator", caption=paste0("Source: ", unique(DT2$file_name)))+
  ylim(0,1.5)

```


##### HIV

```{r}
DT3 <- DT[grant %in% c("SEN-H-CNLS", "SEN-H-ANCS")]
DT3 <- DT3[pudr_sheet %in% c('impact_outcome_indicators_main', 'coverage_indicators_main')]
DT3 <- DT3[file_name %in% c('PU-SEN-H-CNLS-S1-2019_15082019_finale.xlsx', 'SEN H ANCS PU (Jan-Juin19), LFA 5Sept19.xlsm')]

# plot of TB Data in Senegal-Most recent grant period
ggplot(DT3, aes(x=indicator_code, y=any_achievement_ratio)) +
  geom_point(aes(color=grant)) +
  labs(title="HIV performance in Senegal") +
  geom_hline(yintercept = 1) +
  theme_bw()+
  coord_flip()+
  labs(y="Achievement Ratio", x="Indicator", caption=paste0("Source: ", unique(DT3$file_name)))+
  ylim(0,1.5)

```

